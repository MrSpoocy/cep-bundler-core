{"version":3,"file":"cep-bundler-core.cjs.js","sources":["../src/templates/manifest.js","../src/templates/html.js","../src/templates/.debug.js","../src/index.js"],"sourcesContent":["var sizeTemplate = (name, width, height) =>\n  width !== undefined && height !== undefined ? `\n            <${name}>\n              <Width>${width}</Width>\n              <Height>${height}</Height>\n            </${name}>` : '';\n\nexport default ({\n  isDev,\n  bundleName,\n  bundleId,\n  hosts,\n  bundleVersion,\n  cepVersion,\n  extensions\n}) => {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<ExtensionManifest xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ExtensionBundleId=\"${bundleId}\" ExtensionBundleName=\"${bundleName}\" ExtensionBundleVersion=\"${bundleVersion}\" Version=\"${cepVersion}\">\n  <ExtensionList>\n    ${extensions.map(extension => `<Extension Id=\"${extension.id}\" Version=\"${bundleVersion}\" />`).join('\\n    ')}\n  </ExtensionList>\n  <ExecutionEnvironment>\n    <HostList>\n      ${hosts\n        .map(host => `<Host Name=\"${host.name}\" Version=\"${host.version}\" />`)\n        .join('\\n      ')}\n    </HostList>\n    <LocaleList>\n      <Locale Code=\"All\"/>\n    </LocaleList>\n    <RequiredRuntimeList>\n      <RequiredRuntime Name=\"CSXS\" Version=\"${cepVersion}\" />\n    </RequiredRuntimeList>\n  </ExecutionEnvironment>\n  <DispatchInfoList>\n    ${extensions.map(extension => {\n      var commandLineParams = extension.cefParams.map(\n        cefParam => `<Parameter>${cefParam}</Parameter>`\n      )\n      var icons = [\n        { icon: extension.iconNormal, type: 'Normal' },\n        { icon: extension.iconRollover, type: 'RollOver' },\n        { icon: extension.iconDarkNormal, type: 'DarkNormal' },\n        { icon: extension.iconDarkRollover, type: 'DarkRollOver' },\n      ]\n        .filter(({ icon }) => !!icon)\n        .map(({ icon, type }) => `<Icon Type=\"${type}\">${icon}</Icon>`)\n        .join('\\n            ')\n      var size = sizeTemplate('Size', extension.panelWidth, extension.panelHeight);\n      var minSize = sizeTemplate('MinSize', extension.panelMinWidth, extension.panelMinHeight);\n      var maxSize = sizeTemplate('MaxSize', extension.panelMaxWidth, extension.panelMaxHeight);\n      var startOn = (!extension.lifecycle.startOnEvents || extension.lifecycle.startOnEvents.length === 0) ? '' : `\n          <StartOn>\n            ${extension.lifecycle.startOnEvents.map(e => `<Event>${e}</Event>`).join('\\n            ')}\n          </StartOn>`;\n      return `<Extension Id=\"${extension.id}\">\n      <DispatchInfo>\n        <Resources>\n          <MainPath>${isDev ? `./dev.${extension.id}.html` : extension.htmlFilename}</MainPath>\n          <CEFCommandLine>\n            ${commandLineParams.join('\\n            ')}\n          </CEFCommandLine>\n        </Resources>\n        <Lifecycle>\n          <AutoVisible>${extension.lifecycle.autoVisible}</AutoVisible>${startOn}\n        </Lifecycle>\n        <UI>\n          <Type>${extension.type || 'Panel'}</Type>\n          ${extension.menu === false ? '' : `<Menu>${extension.name}</Menu>`}\n          <Geometry>${size}${minSize}${maxSize}\n          </Geometry>${icons ? `\n          <Icons>${icons}</Icons>` : ''}\n        </UI>\n      </DispatchInfo>\n    </Extension>`}).join('\\n    ')}\n  </DispatchInfoList>\n</ExtensionManifest>`\n}","export default ({ title = 'CEP Panel', href }) => {\n  return `<!DOCTYPE html>\n<html>\n  <head>\n    <title>${title}</title>\n  </head>\n  <body>\n    <script>\n      window.location.href = \"${href}\";\n    </script>\n  </body>\n</html>`\n}","export default ({ extensions }) => {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<ExtensionList>\n  ${extensions.map(extension => `<Extension Id=\"${extension.id}\">\n    <HostList>\n      ${Object.keys(extension.debugPorts)\n        .map(\n          (host) =>\n            `<Host Name=\"${host.trim()}\" Port=\"${extension.debugPorts[host]}\" />`\n        )\n        .join('\\n      ')}\n    </HostList>\n  </Extension>`).join('\\n  ')}\n</ExtensionList>`\n}\n","import os from 'os'\nimport path from 'path'\nimport { execSync } from 'child_process'\nimport fs from 'fs-extra'\nimport { range, defaults } from 'lodash'\n\nimport manifestTemplate from './templates/manifest'\nimport panelTemplate from './templates/html'\nimport debugTemplate from './templates/.debug'\n\nfunction templateDebug(formatter) {\n  return range(4, 16)\n    .map(formatter)\n    .join(os.EOL)\n}\n\nexport function enablePlayerDebugMode() {\n  // enable unsigned extensions for the foreseable future\n  if (process.platform === 'darwin') {\n    execSync(\n      templateDebug(i => `defaults write com.adobe.CSXS.${i} PlayerDebugMode 1`)\n    )\n  } else if (process.platform === 'win32') {\n    execSync(\n      templateDebug(\n        i => `REG ADD HKCU\\\\Software\\\\Adobe\\\\CSXS.${i} /f /v PlayerDebugMode /t REG_SZ /d 1`\n      )\n    )\n  }\n}\n\nexport function disablePlayerDebugMode() {\n  // disable unsigned extensions for the foreseable future\n  if (process.platform === 'darwin') {\n    execSync(\n      templateDebug(i => `defaults write com.adobe.CSXS.${i} PlayerDebugMode 0`)\n    )\n  } else if (process.platform === 'win32') {\n    execSync(\n      templateDebug(\n        i => `REG DELETE HKCU\\\\Software\\\\Adobe\\\\CSXS.${i} /f /v PlayerDebugMode`\n      )\n    )\n  }\n}\n\nfunction camelToSnake(str) {\n  return str.replace(/([A-Z])/g, (part) => `_${part.toLowerCase()}`)\n}\n\nfunction isTruthy(str) {\n  return typeof str === 'string' && (str === '1' || str.toLowerCase() === 'true')\n}\n\nfunction getEnvConfig() {\n  const debugPortEnvs = Object.keys(process.env)\n    .filter((key) => key.indexOf('CEP_DEBUG_PORT_') === 0)\n  return {\n    bundleName: process.env.CEP_NAME,\n    bundleId: process.env.CEP_ID,\n    bundleVersion: process.env.CEP_VERSION,\n    cepVersion: process.env.CEP_CEP_VERSION,\n    hosts: process.env.CEP_HOSTS,\n    iconNormal: process.env.CEP_ICON_NORMAL,\n    iconRollover: process.env.CEP_ICON_ROLLOVER,\n    iconDarkNormal: process.env.CEP_ICON_DARK_NORMAL,\n    iconDarkRollover: process.env.CEP_ICON_DARK_ROLLOVER,\n    panelWidth: process.env.CEP_PANEL_WIDTH,\n    panelHeight: process.env.CEP_PANEL_HEIGHT,\n    panelMinWidth: process.env.CEP_PANEL_MIN_WIDTH,\n    panelMinHeight: process.env.CEP_PANEL_MIN_HEIGHT,\n    panelMaxWidth: process.env.CEP_PANEL_MAX_WIDTH,\n    panelMaxHeight: process.env.CEP_PANEL_MAX_HEIGHT,\n    debugPorts: debugPortEnvs.length > 0\n      ? debugPortEnvs.reduce((obj, key) => {\n        obj[key] = parseInt(process.env[key], 10)\n        return obj\n      }, {})\n      : undefined,\n    debugInProduction: isTruthy(process.env.CEP_DEBUG_IN_PRODUCTION) || undefined,\n    cefParams: !process.env.CEP_CEF_PARAMS ? undefined : process.env.CEP_CEF_PARAMS.split(',')\n  }\n}\n\nfunction getPkgConfig(pkg, env) {\n  const pkgConfig = pkg.hasOwnProperty('cep')\n    ? (\n      pkg.cep.hasOwnProperty(env)\n        ? pkg.cep[env]\n        : pkg.cep\n    )\n    : {}\n  return {\n    bundleName: pkgConfig.name,\n    bundleId: pkgConfig.id,\n    bundleVersion: pkgConfig.version,\n    cepVersion: pkgConfig.cepVersion,\n    hosts: pkgConfig.hosts,\n    iconNormal: pkgConfig.iconNormal,\n    iconRollover: pkgConfig.iconRollover,\n    iconDarkNormal: pkgConfig.iconDarkNormal,\n    iconDarkRollover: pkgConfig.iconDarkRollover,\n    panelWidth: pkgConfig.panelWidth,\n    panelHeight: pkgConfig.panelHeight,\n    panelMinWidth: pkgConfig.panelMinWidth,\n    panelMinHeight: pkgConfig.panelMinHeight,\n    panelMaxWidth: pkgConfig.panelMaxWidth,\n    panelMaxHeight: pkgConfig.panelMaxHeight,\n    debugPorts: pkgConfig.debugPorts,\n    debugInProduction: pkgConfig.debugInProduction,\n    lifecycle: pkgConfig.lifecycle,\n    cefParams: pkgConfig.cefParams,\n    extensions: pkgConfig.extensions\n  }\n}\n\nfunction getConfigDefaults() {\n  return {\n    ...getExtensionDefaults(),\n    bundleName: 'CEP Extension',\n    bundleId: 'com.mycompany.myextension',\n    hosts: '*',\n    debugInProduction: false,\n    cepVersion: '6.0'\n  }\n}\n\nexport function getConfig(pkg, env) {\n  const config = defaults(\n    getEnvConfig(),\n    getPkgConfig(pkg, env),\n    getConfigDefaults(),\n    {\n      bundleVersion: pkg.version\n    }\n  )\n  config.hosts = parseHosts(config.hosts)\n  let extensions = []\n  if (Array.isArray(config.extensions)) {\n    extensions = config.extensions.map(extension => {\n      return {\n        ...getExtensionDefaults(),\n        ...extension\n      }\n    })\n  } else {\n    extensions.push({\n      id: config.bundleId,\n      name: config.bundleName,\n      ...config\n    })\n  }\n  config.extensions = extensions\n  return config\n}\n\nexport function objectToProcessEnv(obj) {\n  // assign object to process.env so they can be used in the code\n  Object.keys(obj).forEach(key => {\n    const envKey = camelToSnake(key).toUpperCase()\n    const value = typeof obj[key] === 'string'\n      ? obj[key]\n      : JSON.stringify(obj[key])\n    process.env[envKey] = value\n  })\n}\n\nexport function writeExtensionTemplates(opts) {\n  const manifestContents = manifestTemplate(opts)\n  const {\n    out,\n    debugInProduction,\n    isDev,\n    extensions\n  } = opts\n  const manifestDir = path.join(out, 'CSXS')\n  const manifestFile = path.join(manifestDir, 'manifest.xml')\n  return Promise.resolve()\n    .then(() => fs.ensureDir(manifestDir))\n    .then(() => fs.writeFile(manifestFile, manifestContents))\n    .then(() => {\n      let chain = Promise.resolve()\n      if (debugInProduction || isDev) {\n        const debugContents = debugTemplate(opts)\n        chain = chain.then(() => fs.writeFile(path.join(out, '.debug'), debugContents))\n      }\n      if (isDev) {\n        extensions.forEach(extension => {\n          const href = `http://${extension.devHost}:${extension.devPort}`\n          const panelContents = panelTemplate({\n            title: extension.name,\n            href\n          })\n          chain = chain.then(() => fs.writeFile(path.join(out, `dev.${extension.id}.html`), panelContents))\n        })\n      }\n      return chain\n    })\n}\n\nexport function parseHosts(hostsString) {\n  if (hostsString == '*')\n    hostsString = `PHXS, IDSN, AICY, ILST, PPRO, PRLD, AEFT, FLPR, AUDT, DRWV, MUST, KBRG`\n  const hosts = hostsString\n    .split(/(?![^)(]*\\([^)(]*?\\)\\)),(?![^\\[]*\\])/)\n    .map(host => host.trim())\n    .map(host => {\n      let [name, version] = host.split('@')\n      if (version == '*' || !version) {\n        version = '[0.0,99.9]'\n      } else if (version) {\n        version = version\n      }\n      return {\n        name,\n        version,\n      }\n    })\n  return hosts\n}\n\nexport function getExtenstionPath() {\n  if (process.platform == 'darwin') {\n    return path.join(\n      os.homedir(),\n      '/Library/Application Support/Adobe/CEP/extensions'\n    )\n  } else if (process.platform == 'win32') {\n    return path.join(process.env.APPDATA, 'Adobe/CEP/extensions')\n  }\n}\n\nfunction getSymlinkExtensionPath({ bundleId }) {\n  const extensionPath = getExtenstionPath()\n  return path.join(extensionPath, bundleId)\n}\n\nexport function symlinkExtension({ bundleId, out }) {\n  const target = getSymlinkExtensionPath({ bundleId })\n  return Promise.resolve()\n    .then(() => fs.ensureDir(getExtenstionPath()))\n    .then(() => fs.remove(target))\n    .then(() => {\n      if (process.platform === 'win32') {\n        return fs.symlink(path.join(out, '/'), target, 'junction')\n      } else {\n        return fs.symlink(path.join(out, '/'), target)\n      }\n    })\n}\n\nexport function copyDependencies({ root, out, pkg }) {\n  const deps = pkg.dependencies || {}\n  return Object.keys(deps).reduce((chain, dep) => {\n    const src = path.join(root, 'node_modules', dep)\n    const dest = path.join(out, 'node_modules', dep)\n    let exists = false\n    try {\n      exists = fs.statSync(dest).isFile();\n    }\n    catch (err) {}\n    if (!exists) {\n      chain = chain\n        .then(() => fs.copy(src, dest))\n        .catch(() => {\n          console.error(\n            `Could not copy ${src} to ${dest}. Ensure the path is correct.`\n          )\n        })\n        .then(() => copyDependencies({\n          root,\n          out,\n          pkg: fs.readJsonSync(path.join(root, 'node_modules', dep, 'package.json'))\n        }))\n      return chain\n    }\n    return chain\n  }, Promise.resolve())\n}\n\nexport function copyIcons({\n  root,\n  out,\n  iconNormal,\n  iconRollover,\n  iconDarkNormal,\n  iconDarkRollover\n}) {\n  const iconPaths = [\n    iconNormal,\n    iconRollover,\n    iconDarkNormal,\n    iconDarkRollover,\n  ]\n    .filter(icon => icon !== undefined)\n    .map(icon => ({\n        source: path.resolve(root, icon),\n        output: path.join(out, path.relative(root, icon)),\n    }))\n  return Promise.all(\n    iconPaths.map(icon => {\n      return fs.copy(icon.source, icon.output)\n        .catch(() => {\n          console.error(\n            `Could not copy ${icon.source}. Ensure the path is correct.`\n          )\n        })\n    })\n  )\n}\n\nfunction getExtensionDefaults() {\n  return {\n    panelWidth: 500,\n    panelHeight: 500,\n    htmlFilename: 'index.html',\n    devPort: 8080,\n    devHost: 'localhost',\n    lifecycle: {\n      autoVisible: true,\n      startOnEvents: []\n    },\n    cefParams: [\n      '--allow-file-access-from-files',\n      '--allow-file-access',\n      '--enable-nodejs',\n      '--mixed-context'\n    ],\n    debugPorts: {\n      PHXS: 3001,\n      IDSN: 3002,\n      AICY: 3003,\n      ILST: 3004,\n      PPRO: 3005,\n      PRLD: 3006,\n      AEFT: 3007,\n      FLPR: 3008,\n      AUDT: 3009,\n      DRWV: 3010,\n      MUST: 3011,\n      KBRG: 3012,\n    }\n  }\n}\n\nexport function compile(opts) {\n  opts.env = opts.env ? opts.env : process.env.NODE_ENV\n  opts.root = opts.root ? opts.root : process.cwd()\n  opts.htmlFilename = opts.htmlFilename ? opts.htmlFilename : 'index.html'\n  opts.pkg = opts.pkg ? opts.pkg : require(path.join(opts.root, '/package.json'))\n  opts.devHost = opts.devHost ? opts.devHost : 'localhost'\n  opts.devPort = opts.devPort ? opts.devPort : 8080\n  opts.isDev = opts.hasOwnProperty('isDev') ? opts.isDev : false\n  const config = getConfig(opts.pkg, opts.env)\n  const allOpts = {\n    ...opts,\n    ...config,\n  }\n  let chain = Promise.resolve()\n  if (opts.isDev) {\n    enablePlayerDebugMode()\n    if (!config.noSymlink) {\n      chain = chain.then(() => symlinkExtension(allOpts))\n    }\n  }\n  chain = chain.then(() => copyDependencies(allOpts))\n    .then(() => writeExtensionTemplates(allOpts))\n    .then(() => copyIcons(allOpts))\n  return chain\n}"],"names":["sizeTemplate","name","width","height","undefined","isDev","bundleName","bundleId","hosts","bundleVersion","cepVersion","extensions","map","extension","id","join","host","version","commandLineParams","cefParams","cefParam","icons","icon","iconNormal","type","iconRollover","iconDarkNormal","iconDarkRollover","filter","size","panelWidth","panelHeight","minSize","panelMinWidth","panelMinHeight","maxSize","panelMaxWidth","panelMaxHeight","startOn","lifecycle","startOnEvents","length","e","htmlFilename","autoVisible","menu","title","href","Object","keys","debugPorts","trim","templateDebug","formatter","range","os","EOL","enablePlayerDebugMode","process","platform","execSync","i","disablePlayerDebugMode","camelToSnake","str","replace","part","toLowerCase","isTruthy","getEnvConfig","debugPortEnvs","env","key","indexOf","CEP_NAME","CEP_ID","CEP_VERSION","CEP_CEP_VERSION","CEP_HOSTS","CEP_ICON_NORMAL","CEP_ICON_ROLLOVER","CEP_ICON_DARK_NORMAL","CEP_ICON_DARK_ROLLOVER","CEP_PANEL_WIDTH","CEP_PANEL_HEIGHT","CEP_PANEL_MIN_WIDTH","CEP_PANEL_MIN_HEIGHT","CEP_PANEL_MAX_WIDTH","CEP_PANEL_MAX_HEIGHT","reduce","obj","parseInt","debugInProduction","CEP_DEBUG_IN_PRODUCTION","CEP_CEF_PARAMS","split","getPkgConfig","pkg","pkgConfig","hasOwnProperty","cep","getConfigDefaults","getExtensionDefaults","getConfig","config","defaults","parseHosts","Array","isArray","push","objectToProcessEnv","forEach","envKey","toUpperCase","value","JSON","stringify","writeExtensionTemplates","opts","manifestContents","manifestTemplate","out","manifestDir","path","manifestFile","Promise","resolve","then","fs","ensureDir","writeFile","chain","debugContents","debugTemplate","devHost","devPort","panelContents","panelTemplate","hostsString","getExtenstionPath","homedir","APPDATA","getSymlinkExtensionPath","extensionPath","symlinkExtension","target","remove","symlink","copyDependencies","root","deps","dependencies","dep","src","dest","exists","statSync","isFile","err","copy","console","error","readJsonSync","copyIcons","iconPaths","source","output","relative","all","PHXS","IDSN","AICY","ILST","PPRO","PRLD","AEFT","FLPR","AUDT","DRWV","MUST","KBRG","compile","NODE_ENV","cwd","require","allOpts","noSymlink"],"mappings":"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"}